!function(a){function t(a){var t,o=a.getAttribute("data-modal-attr"),e=a.getAttribute("data-target"),d=a.getAttribute("data-url"),l={"class":"modal hide fade",tabindex:"-1",role:"dialog",replace:!1};o&&$.extend(!0,l,$.parseJSON(o)),l.replace&&$(".modal").modal("hide"),delete l.replace,t=e?$(e):$("<div>").attr(l),$("body").modalmanager("loading"),t.load(d,"",function(a,o){$("body").modalmanager("loading"),"error"!=o?t.modal():self.flashmsg({type:"danger",html:"could not load modal dialog"})})}ajax_ops.modal_form=function(a,t){var o=$(a),e={target:o.closest(".modal")};return t||(t={}),$.extend(!0,e,t),e.cb=function(a,o){t.with_close&&a.modal("hide"),t.cb&&t.cb(a,o)},ajax_ops.submit_form(a,e)},$(a).on("click",'[data-toggle="ajax-modal"]',function(){t(this)})}(document,window);